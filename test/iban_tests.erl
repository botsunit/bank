-module(iban_tests).

-include_lib("eunit/include/eunit.hrl").

iban_test_() ->
  {setup,
   fun setup/0, fun teardown/1,
   [
    ?_test(t_valid())
    , ?_test(t_fake())
   ]}.

setup() ->
  ok.

teardown(_) ->
  ok.

t_valid() ->
  ?assertEqual(true, iban:is_valid("BA39 1290 0794 0102 8494")),
  ?assertEqual(true, iban:is_valid("BA39         1290 0794 0102 8494")),
  ?assertEqual(true, iban:is_valid("BA391290079401028494")),
  ?assertEqual(true, iban:is_valid("GB29 NWBK 6016 1331 9268 19")),
  ?assertEqual(true, iban:is_valid("GE29 NB00 0000 0101 9049 17")),
  ?assertEqual(true, iban:is_valid("GI75 NWBK 0000 0000 7099 453")),
  ?assertEqual(true, iban:is_valid("GL89 6471 0001 0002 06")),
  ?assertEqual(true, iban:is_valid("GR16 0110 1250 0000 0001 2300 695")),
  ?assertEqual(true, iban:is_valid("HR12 1001 0051 8630 0016 0")),
  ?assertEqual(true, iban:is_valid("HU42 1177 3016 1111 1018 0000 0000")),
  ?assertEqual(true, iban:is_valid("IE29 AIBK 9311 5212 3456 78")),
  ?assertEqual(true, iban:is_valid("IL62 0108 0000 0009 9999 999")),
  ?assertEqual(true, iban:is_valid(" IS14 0159 2600 7654 5510 7303 39")),
  ?assertEqual(true, iban:is_valid("IT60 X054 2811 1010 0000 0123 456")),
  ?assertEqual(true, iban:is_valid("KW81 CBKU 0000 0000 0000 1234 5601 01")),
  ?assertEqual(true, iban:is_valid("KZ86 125K ZT50 0410 0100")),
  ?assertEqual(true, iban:is_valid("LB62 0999 0000 0001 0019 0122 9114")),
  ?assertEqual(true, iban:is_valid("LI21 0881 0000 2324 013A A")),
  ?assertEqual(true, iban:is_valid("LT12 1000 0111 0100 1000")),
  ?assertEqual(true, iban:is_valid("LV80 BANK 0000 4351 9500 1")),
  ?assertEqual(true, iban:is_valid("MC11 1273 9000 7000 1111 1000 H79")),
  ?assertEqual(true, iban:is_valid("ME25 5050 0001 2345 6789 51")),
  ?assertEqual(true, iban:is_valid("MT84 MALT 0110 0001 2345 MTLC AST0 01S")),
  ?assertEqual(true, iban:is_valid("MU17 BOMM 0101 1010 3030 0200 000M UR")),
  ?assertEqual(true, iban:is_valid("NL91 ABNA 0417 1643 00")),
  ?assertEqual(true, iban:is_valid("NO93 8601 1117 947")),
  ?assertEqual(true, iban:is_valid("PT50 0002 0123 1234 5678 9015 4")),
  ?assertEqual(true, iban:is_valid("RO49 AAAA 1B31 0075 9384 0000")),
  ?assertEqual(true, iban:is_valid("RS35 2600 0560 1001 6113 79")),
  ?assertEqual(true, iban:is_valid("SA03 8000 0000 6080 1016 7519")),
  ?assertEqual(true, iban:is_valid("SM86 U032 2509 8000 0000 0270 100")),
  ?assertEqual(true, iban:is_valid("TR33 0006 1005 1978 6457 8413 26")),
  ?assertEqual(true, iban:is_valid("BG80 BNBG 9661 1020 3456 78")),
  ?assertEqual(true, iban:is_valid(" FO62 6460 0001 6316 34")),
  ?assertEqual(true, iban:is_valid("DK50 0040 0440 1162 43")),
  ?assertEqual(true, iban:is_valid("CH93 0076 2011 6238 5295 7")),
  ?assertEqual(true, iban:is_valid("DE89 3704 0044 0532 0130 00")),
  ?assertEqual(true, iban:is_valid("AD12 0001 2030 2003 5910 0100")),
  ?assertEqual(true, iban:is_valid(" AL47 2121 1009 0000 0002 3569 8741")),
  ?assertEqual(true, iban:is_valid("AT61 1904 3002 3457 3201")),
  ?assertEqual(false, iban:is_valid("")),
  ?assertEqual(false, iban:is_valid("AT61 1904 4002 3457 3201")),
  ?assertEqual(false, iban:is_valid("CH93 0076 2012 6238 5295 7")),
  ?assertEqual(false, iban:is_valid("NL91 ABAB 0417 1634 00")),
  ?assertEqual(false, iban:is_valid("ME25 5050 0021 2345 6789 51")),
  ?assertEqual(false, iban:is_valid("LV80 BANK KK00 4351 9500 1")),
  ?assertEqual(false, iban:is_valid("KW81 CBKU A000 0000 0000 1234 5601 01")),
  ?assertEqual(false, iban:is_valid("KZ86 125K ZT13 0410 0100")),
  ?assertEqual(false, iban:is_valid("IS14 0159 2600 7654 6120 7303 49")),
  ?assertEqual(false, iban:is_valid("GR16 0110 12AA 0000 0001 2300 695")),
  ?assertEqual(false, iban:is_valid("NL91 ABNA BC17 1643 00")),
  ?assertEqual(false, iban:is_valid("BA39 1290 0794 0102 8493")),
  ?assertEqual(false, iban:is_valid("BA39 1290 0794 0102 849")).

t_fake() ->
  ?assertEqual(true, iban:is_valid(iban:fake(<<"AD">>))),
  ?assertEqual(true, iban:is_valid(iban:fake(<<"AE">>))),
  ?assertEqual(true, iban:is_valid(iban:fake(<<"AL">>))),
  ?assertEqual(true, iban:is_valid(iban:fake(<<"AT">>))),
  ?assertEqual(true, iban:is_valid(iban:fake(<<"AZ">>))),
  ?assertEqual(true, iban:is_valid(iban:fake(<<"BA">>))),
  ?assertEqual(true, iban:is_valid(iban:fake(<<"BE">>))),
  ?assertEqual(true, iban:is_valid(iban:fake(<<"BG">>))),
  ?assertEqual(true, iban:is_valid(iban:fake(<<"BH">>))),
  ?assertEqual(true, iban:is_valid(iban:fake(<<"CH">>))),
  ?assertEqual(true, iban:is_valid(iban:fake(<<"CY">>))),
  ?assertEqual(true, iban:is_valid(iban:fake(<<"CZ">>))),
  ?assertEqual(true, iban:is_valid(iban:fake(<<"DE">>))),
  ?assertEqual(true, iban:is_valid(iban:fake(<<"DK">>))),
  ?assertEqual(true, iban:is_valid(iban:fake(<<"DO">>))),
  ?assertEqual(true, iban:is_valid(iban:fake(<<"EE">>))),
  ?assertEqual(true, iban:is_valid(iban:fake(<<"ES">>))),
  ?assertEqual(true, iban:is_valid(iban:fake(<<"FI">>))),
  ?assertEqual(true, iban:is_valid(iban:fake(<<"FO">>))),
  ?assertEqual(true, iban:is_valid(iban:fake(<<"FR">>))),
  ?assertEqual(true, iban:is_valid(iban:fake(<<"GB">>))),
  ?assertEqual(true, iban:is_valid(iban:fake(<<"GE">>))),
  ?assertEqual(true, iban:is_valid(iban:fake(<<"GI">>))),
  ?assertEqual(true, iban:is_valid(iban:fake(<<"GL">>))),
  ?assertEqual(true, iban:is_valid(iban:fake(<<"GR">>))),
  ?assertEqual(true, iban:is_valid(iban:fake(<<"HR">>))),
  ?assertEqual(true, iban:is_valid(iban:fake(<<"HU">>))),
  ?assertEqual(true, iban:is_valid(iban:fake(<<"IE">>))),
  ?assertEqual(true, iban:is_valid(iban:fake(<<"IL">>))),
  ?assertEqual(true, iban:is_valid(iban:fake(<<"IS">>))),
  ?assertEqual(true, iban:is_valid(iban:fake(<<"IT">>))),
  ?assertEqual(true, iban:is_valid(iban:fake(<<"JO">>))),
  ?assertEqual(true, iban:is_valid(iban:fake(<<"KW">>))),
  ?assertEqual(true, iban:is_valid(iban:fake(<<"KZ">>))),
  ?assertEqual(true, iban:is_valid(iban:fake(<<"LB">>))),
  ?assertEqual(true, iban:is_valid(iban:fake(<<"LI">>))),
  ?assertEqual(true, iban:is_valid(iban:fake(<<"LT">>))),
  ?assertEqual(true, iban:is_valid(iban:fake(<<"LU">>))),
  ?assertEqual(true, iban:is_valid(iban:fake(<<"LV">>))),
  ?assertEqual(true, iban:is_valid(iban:fake(<<"MC">>))),
  ?assertEqual(true, iban:is_valid(iban:fake(<<"MD">>))),
  ?assertEqual(true, iban:is_valid(iban:fake(<<"ME">>))),
  ?assertEqual(true, iban:is_valid(iban:fake(<<"MK">>))),
  ?assertEqual(true, iban:is_valid(iban:fake(<<"MR">>))),
  ?assertEqual(true, iban:is_valid(iban:fake(<<"MT">>))),
  ?assertEqual(true, iban:is_valid(iban:fake(<<"MU">>))),
  ?assertEqual(true, iban:is_valid(iban:fake(<<"NL">>))),
  ?assertEqual(true, iban:is_valid(iban:fake(<<"NO">>))),
  ?assertEqual(true, iban:is_valid(iban:fake(<<"PK">>))),
  ?assertEqual(true, iban:is_valid(iban:fake(<<"PL">>))),
  ?assertEqual(true, iban:is_valid(iban:fake(<<"PT">>))),
  ?assertEqual(true, iban:is_valid(iban:fake(<<"QA">>))),
  ?assertEqual(true, iban:is_valid(iban:fake(<<"RO">>))),
  ?assertEqual(true, iban:is_valid(iban:fake(<<"RS">>))),
  ?assertEqual(true, iban:is_valid(iban:fake(<<"SA">>))),
  ?assertEqual(true, iban:is_valid(iban:fake(<<"SE">>))),
  ?assertEqual(true, iban:is_valid(iban:fake(<<"SI">>))),
  ?assertEqual(true, iban:is_valid(iban:fake(<<"SK">>))),
  ?assertEqual(true, iban:is_valid(iban:fake(<<"SM">>))),
  ?assertEqual(true, iban:is_valid(iban:fake(<<"TN">>))),
  ?assertEqual(true, iban:is_valid(iban:fake(<<"TR">>))).
